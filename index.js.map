{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '14089445-7a335211e96dbf178fafb69e6';\n\nasync function searchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n\n  const url = 'https://pixabay.com/api/';\n\n  try {\n    const response = await axios.get(url, {\n      params: params\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error creating URL: ', error);\n    return [];\n  }\n}\n\nexport { searchImages };\n","function getGallery(data) {\n  // webformatURL — посилання на маленьке зображення для списку карток у галереї\n  // largeImageURL — посилання на велике зображення для модального вікна\n  // tags — рядок з описом зображення. Підійде для атрибута alt\n  // likes — кількість вподобайок\n  // views — кількість переглядів\n  // comments — кількість коментарів\n  // downloads — кількість завантажень\n\n  // Generate the gallery HTML\n\n  const gallery = document.createElement('ul');\n  gallery.classList.add('gallery');\n\n  for (const item of data) {\n    const galleryItem = document.createElement('li');\n    galleryItem.classList.add('gallery-item');\n\n    const galleryImage = document.createElement('img');\n    galleryImage.classList.add('gallery-image');\n    galleryImage.src = item.webformatURL;\n    galleryImage.alt = item.tags;\n\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = item.largeImageURL;\n    link.append(galleryImage);\n\n    galleryItem.append(link);\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likes = document.createElement('div');\n    likes.classList.add('info-details');\n    likes.innerHTML = `<span class=\"info-text\">Likes</span>${item.likes}`;\n\n    const views = document.createElement('div');\n    views.classList.add('info-details');\n    views.innerHTML = `<span class=\"info-text\">Views</span>${item.views}`;\n\n    const comments = document.createElement('div');\n    comments.classList.add('info-details');\n    comments.innerHTML = `<span class=\"info-text\">Comments</span>${item.comments}`;\n\n    const downloads = document.createElement('div');\n    downloads.classList.add('info-details');\n    downloads.innerHTML = `<span class=\"info-text\">Downloads</span>${item.downloads}`;\n\n    info.append(likes, views, comments, downloads);\n    galleryItem.append(info);\n    gallery.append(galleryItem);\n  }\n  return gallery.innerHTML;\n}\n\nexport { getGallery };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchImages } from './js/pixabay-api';\nimport { getGallery } from './js/render-functions';\n\niziToast.settings({\n  position: 'topRight',\n});\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  className: 'gallery-wrapper',\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page;\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const query = form.elements.q.value.trim();\n\n  if (query === '') {\n    iziToast.warning({\n      message: 'Please enter a search query',\n    });\n    form.reset();\n    return;\n  }\n\n  page = 1;\n  loadMoreBtn.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  loader.classList.remove('is-hidden');\n\n  search(query);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  const query = form.elements.q.value.trim();\n\n  loader.classList.remove('is-hidden');\n  loadMoreBtn.classList.add('is-hidden');\n\n  search(query);\n\n  setTimeout(() => {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n      const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n      window.scrollBy({\n        top: galleryItemHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  }, 500);\n});\n\nfunction search(query) {\n  searchImages(query, page)\n    .then(data => {\n      const isLastPage = page >= Math.ceil(data.totalHits / 15);\n\n      if (data.hits.length === 0) {\n        iziToast.warning({\n          message: 'No more images found',\n        });\n        return;\n      } else {\n        page += 1;\n        gallery.insertAdjacentHTML('beforeend', getGallery(data.hits));\n        lightbox.refresh();\n      }\n\n      if (isLastPage) {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMoreBtn.classList.add('is-hidden');\n      } else {\n        loadMoreBtn.classList.remove('is-hidden');\n      }\n    })\n    .catch(err => {\n      iziToast.error({\n        message: err.message,\n      });\n    })\n    .finally(() => {\n      loader.classList.add('is-hidden');\n    });\n}\n"],"names":["API_KEY","searchImages","query","page","params","url","axios","error","getGallery","data","gallery","item","galleryItem","galleryImage","link","info","likes","views","comments","downloads","iziToast","lightbox","SimpleLightbox","form","loader","loadMoreBtn","e","search","galleryItemHeight","isLastPage","err"],"mappings":"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"}